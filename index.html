<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo Emergência Mundial</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f2;
      margin: 0;
      padding: 2rem;
    }
    h1, h2 {
      color: #2e5949;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .card {
      background: #ffffff;
      border: 2px solid #2e5949;
      border-radius: 1rem;
      padding: 1rem;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
      min-height: 150px;
      transition: all 0.3s ease-in-out;
    }
    .card.drag-over {
      border: 2px dashed #4caf50;
      background-color: #f1fff4;
    }
    .card.fade-out {
      animation: fadeOut 0.6s forwards;
    }
    @keyframes fadeOut {
      0% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(1.05); }
    }

    .card h3 {
      margin-top: 0;
      color: #2e5949;
    }
    .card p {
      font-size: 0.95rem;
    }
    .gtis {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .gti {
      background-color: #2e5949;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      cursor: grab;
      transition: opacity 0.3s;
    }
    .gti:active {
      cursor: grabbing;
    }
    .gti.usado {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .status {
      margin-top: 2rem;
      padding: 1rem;
      background: #eaf7f2;
      border: 1px solid #c5e2d5;
      border-radius: 0.5rem;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: #fff;
      padding: 2rem;
      border-radius: 1rem;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      text-align: center;
    }
    .modal-content h3 {
      margin-top: 0;
      color: #2e5949;
    }
    .modal-content button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: #2e5949;
      color: #fff;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Jogo: Emergência Mundial</h1>

  <h2>Eventos Ativos</h2>
  <div class="board" id="eventos">
    <div class="card" id="evento1" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'engenharia')">
      <h3>🌡️ Onda de Calor</h3>
      <p>Temperaturas extremas prejudicam o ambiente escolar.</p>
      <p><strong>Solução:</strong> GTI Engenharia</p>
    </div>
    <div class="card" id="evento2" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'ciencia')">
      <h3>🦟 Surto de Dengue</h3>
      <p>Alta proliferação do mosquito em áreas escolares.</p>
      <p><strong>Solução:</strong> GTI Ciência Cidadã</p>
    </div>
    <div class="card" id="evento3" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'sistemas')">
      <h3>🍔 Merenda Ultraprocessada</h3>
      <p>Alunos sem acesso a alimentação saudável.</p>
      <p><strong>Solução:</strong> GTI Sistemas Alimentares</p>
    </div>
    <div class="card" id="evento4" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'comunicacao')">
      <h3>📱 Fake News Climática</h3>
      <p>Desinformação sobre o clima se espalha nas redes.</p>
      <p><strong>Solução:</strong> GTI Comunicação</p>
    </div>
    <div class="card" id="evento5" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'artes')">
      <h3>🌳 Desmatamento Local</h3>
      <p>Perda da biodiversidade próxima à escola.</p>
      <p><strong>Solução:</strong> GTI Artes</p>
    </div>
    <div class="card" id="evento6" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'educacao')">
      <h3>📚 Desconhecimento Climático</h3>
      <p>Estudantes não entendem a crise climática.</p>
      <p><strong>Solução:</strong> GTI Educação Climática</p>
    </div>
    <div class="card" id="evento7" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'saude')">
      <h3>🏥 Crise Respiratória</h3>
      <p>Aumento de doenças respiratórias por má qualidade do ar.</p>
      <p><strong>Solução:</strong> GTI Saúde Pública</p>
    </div>
    <div class="card" id="evento8" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'justica')">
      <h3>⚖️ Escola em Área Vulnerável</h3>
      <p>Enchentes e calor intenso afetam os mais pobres.</p>
      <p><strong>Solução:</strong> GTI Justiça Climática</p>
    </div>
    <div class="card" id="evento9" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event, 'infra')">
      <h3>🌱 Falta de Natureza</h3>
      <p>Ambiente escolar sem áreas verdes e sombreamento.</p>
      <p><strong>Solução:</strong> GTI Infraestrutura Verde</p>
    </div>
  </div>

  <h2>Cartas de GTIs</h2>
  <div class="gtis">
    <div class="gti" draggable="true" ondragstart="drag(event)" id="engenharia">GTI Engenharia 🌳</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="ciencia">GTI Ciência Cidadã 🔬</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="sistemas">GTI Sistemas Alimentares 🥕</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="comunicacao">GTI Comunicação 📣</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="artes">GTI Artes 🎭</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="educacao">GTI Educação Climática 📚</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="saude">GTI Saúde Pública 🏥</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="justica">GTI Justiça Climática ⚖️</div>
    <div class="gti" draggable="true" ondragstart="drag(event)" id="infra">GTI Infraestrutura Verde 🌿</div>
  </div>

  <div class="status" id="status">
    <strong>Status:</strong> 9 eventos ativos | Nível de Emergência: 9 | Esperança ativa: 0 pontos
  </div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <h3 id="modalTitle">GTI</h3>
      <p id="modalText">Texto do GTI</p>
      <button onclick="fecharModal()">OK</button>
    </div>
  </div>

  <script>
    let emergencias = 9;
    let pontos = 0;
    const usados = new Set();

    const explicacoes = {
      engenharia: "O GTI Engenharia atua na criação de soluções físicas e estruturais para mitigar os impactos das mudanças climáticas, como sombreamento, ventilação e infraestrutura verde.",
      ciencia: "O GTI Ciência Cidadã envolve a comunidade na coleta e análise de dados sobre saúde e ambiente, promovendo conhecimento coletivo e tomada de decisão local.",
      sistemas: "O GTI Sistemas Alimentares trabalha para garantir alimentação saudável e sustentável nas escolas, incentivando o consumo de alimentos frescos e locais.",
      comunicacao: "O GTI Comunicação combate a desinformação e promove o acesso a informações confiáveis sobre o clima e a saúde planetária por meio de mídias acessíveis e educativas.",
      artes: "O GTI Artes mobiliza sensibilidades e promove reflexões por meio de expressões artísticas, fortalecendo o vínculo emocional com a natureza e despertando a consciência ambiental.",
      educacao: "O GTI Educação Climática atua na inserção de temas ambientais no currículo escolar, estimulando a formação de cidadãos críticos e conscientes da crise climática.",
      saude: "O GTI Saúde Pública age para prevenir doenças associadas ao clima, promovendo ambientes escolares saudáveis e campanhas de prevenção baseadas em evidências.",
      justica: "O GTI Justiça Climática atua para reduzir desigualdades e garantir que comunidades vulneráveis tenham acesso a condições dignas diante dos impactos ambientais.",
      infra: "O GTI Infraestrutura Verde propõe soluções baseadas na natureza para tornar os espaços escolares mais resilientes, verdes e adaptados às mudanças climáticas."
    };

    function allowDrop(ev) {
      ev.preventDefault();
      ev.currentTarget.classList.add("drag-over");
    }

    function dragLeave(ev) {
      ev.currentTarget.classList.remove("drag-over");
    }

    function drag(ev) {
      ev.dataTransfer.setData("gti", ev.target.id);
    }

    function drop(ev, gtiCorreto) {
      ev.preventDefault();
      ev.currentTarget.classList.remove("drag-over");

      const gti = ev.dataTransfer.getData("gti");
      const evento = ev.currentTarget;

      if (usados.has(gti)) {
        atualizarStatus(`⚠️ O GTI ${gti.toUpperCase()} já foi usado.`);
        return;
      }

      if (gti === gtiCorreto && evento.style.display !== 'none') {
        evento.classList.add('fade-out');
        setTimeout(() => evento.style.display = 'none', 600);
        emergencias--;
        pontos += 5;
        usados.add(gti);
        document.getElementById(gti).classList.add("usado");
        atualizarStatus(`✅ Você aplicou corretamente o GTI ${gti.toUpperCase()}!`);
        mostrarModal(gti);
        tocarSomAcerto();
      } else {
        atualizarStatus(`❌ O GTI ${gti.toUpperCase()} não resolve esse evento.`);
      }

      if (emergencias === 0) {
        document.getElementById('status').innerHTML += '<br><strong>🌟 Parabéns! Você resolveu todas as emergências!</strong>';
      }
    }

    function atualizarStatus(mensagem) {
      document.getElementById('status').innerHTML =
        `<strong>Status:</strong> ${emergencias} eventos ativos | Nível de Emergência: ${emergencias} | Esperança ativa: ${pontos} pontos<br>${mensagem}`;
    }

    function mostrarModal(gti) {
      document.getElementById("modalTitle").innerText = `GTI ${gti.toUpperCase()}`;
      document.getElementById("modalText").innerText = explicacoes[gti] || "Sem explicação definida.";
      document.getElementById("modal").style.display = "flex";
    }

    function fecharModal() {
      document.getElementById("modal").style.display = "none";
    }

    function tocarSomAcerto() {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = "triangle";
      o.frequency.setValueAtTime(660, ctx.currentTime);
      g.gain.setValueAtTime(0.2, ctx.currentTime);
      o.connect(g);
      g.connect(ctx.destination);
      o.start();
      o.stop(ctx.currentTime + 0.2);
    }
  </script>
</body>
</html>
